{% extends "base.html" %}
{% block javascript %}
<script type="text/javascript">
    function getUpdatedHistory() {
        console.log("getUpdatedHistory()")
        $.ajax({
            url: '/api/download_history',
            data: {
                "results_per_page": 100,
                "q": JSON.stringify({
                    "order_by": [
                        {
                            "field": "id",
                            "direction": "desc"
                        }
                    ]
                })
            },
            dataType: "json",
            contentType: "application/json",
            success: function (data) {
                $("#history_tbl tbody").html()
                $.each(data.objects, function (index, obj) {
                    $("#history_tbl tbody").append(
                            "<tr>" + "<td>" + obj.id + "</td>" + "<td></td>" + "<td>" + obj.name + "</td>" + "</tr>"
                    );
                });
                console.log(data);
            }
        });
    }
    $(document).ready(function () {
        getUpdatedHistory();
    });
</script>
{%endblock%}
{% block body %}
<h2>Download History (Last 100)</h2>
<table id="history_tbl" class="table table-striped table-bordered">
    <thead>
    <th>id</th>
    <th>Date/Time</th>
    <th>name</th>
    </thead>
    <tbody></tbody>
</table>
{% endblock %}
